{"schemaVersion":{"minor":3,"patch":0,"major":0},"hierarchy":{"paths":[["doc:\/\/jp.co.aptpod.iSCP\/documentation\/iSCP"]]},"primaryContentSections":[{"kind":"content","content":[{"text":"Overview","anchor":"overview","level":2,"type":"heading"},{"syntax":"swift","type":"codeListing","code":["\/\/ iSCPをインポート","import iSCP","","\/\/\/ 接続するintdashサーバー","var targetServer: String = \"https:\/\/example.com\"","\/\/\/ ノードUUID（ここで指定されたノードとして送受信を行います。","\/\/\/ intdash APIでノードを生成した際に発行されたノードUUIDを指定します。）","var nodeID: String = \"00000000-0000-0000-0000-000000000000\"","\/\/\/ アクセストークン","\/\/\/","\/\/\/ intdash APIで取得したアクセストークンを設定して下さい。","var accessToken: String = \"\"","\/\/\/ コネクション","var connection: Connection?","","extension ExampleViewController {","    ","    func connect() {","        \/\/ 接続情報のセットアップをします。","        let urls = targetServer.components(separatedBy: \":\/\/\")","        var address: String","        var enableTLS = false","        if urls.count == 1 {","            address = urls[0]","        } else {","            enableTLS = urls[0] == \"https\"","            address = urls[1]","        }","        \/\/ WebSocketを使って接続するように指定します。","        let transportConfig: ITransportConfig = Transport.WebSocket.Config(","            enableTLS: enableTLS","        )","        Connection.connect(","            address: address,","            transportConfig: transportConfig,","            tokenSource: { token in","                \/\/ アクセス用のトークンを指定します。接続時に発生するイベントにより使用されます。","                \/\/ ここでは固定のトークンを返していますが随時トークンの更新を行う実装にするとトークンの期限切れを考える必要がなくなります。","                token(accessToken)","            },","            nodeID: nodeID) { [weak self] con, error in","            guard let con = con else {","                \/\/ 接続失敗。","                return","            }","            \/\/ 接続成功。","            connection = con","            connection?.delegate = self \/\/ ConnectionDelegate","            \/\/ 以降、openUpstreamやopenDownstreamなどが実行可能になります。","        }","    }","}","","extension ExampleViewController : ConnectionDelegate {","    ","    func didReconnect(connection: Connection) {","        \/\/ Connectionが再オープンされた際にコールされます。","    }","    ","    func didDisconnect(connection: Connection) {","        \/\/ Connectionがクローズされた際にコールされます。","    }","    ","    func didFailWithError(connection: Connection, error: Error) {","        \/\/ Connection内部で何らかのエラーが発生した際にコールされます。","    }","    ","}"]}]}],"kind":"article","identifier":{"url":"doc:\/\/jp.co.aptpod.iSCP\/documentation\/iSCP\/ConnectToIntdashAPI","interfaceLanguage":"swift"},"abstract":[{"text":"このサンプルではiscp-swiftを使ってintdash APIに接続します。","type":"text"}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/iscp\/connecttointdashapi"]},{"paths":["\/documentation\/iscp\/connecttointdashapi"],"traits":[{"interfaceLanguage":"occ"}]}],"metadata":{"roleHeading":"Article","role":"article","modules":[{"name":"iSCP"}],"title":"Connect To intdash API"},"sections":[],"references":{"doc://jp.co.aptpod.iSCP/documentation/iSCP":{"abstract":[{"type":"text","text":"iSCP Client for Swift は、iSCP version 2 を用いたリアルタイムAPIにアクセスするためのクライアントライブラリです。"}],"identifier":"doc:\/\/jp.co.aptpod.iSCP\/documentation\/iSCP","kind":"symbol","url":"\/documentation\/iscp","role":"collection","type":"topic","title":"iSCP"}},"variantOverrides":[{"patch":[{"path":"\/identifier\/interfaceLanguage","value":"occ","op":"replace"},{"path":"\/topicSections","value":null,"op":"add"},{"path":"\/seeAlsoSections","op":"add","value":null}],"traits":[{"interfaceLanguage":"occ"}]}]}